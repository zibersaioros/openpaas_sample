DROP TABLE IF EXISTS GROUP_TBL;
DROP TABLE IF EXISTS ORG_TBL;


CREATE TABLE IF NOT EXISTS  ORG_TBL (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY
	, label VARCHAR(40) NOT NULL
	, desc VARCHAR(150)
	, url VARCHAR(500) DEFAULT '#'
	, created TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
	, modified TIMESTAMP
);

CREATE TABLE IF NOT EXISTS GROUP_TBL (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY
	, org_id INTEGER NOT NULL
	, parent_id INTEGER
	, label VARCHAR(40) NOT NULL
	, desc VARCHAR(150)
	, thumb_img_name VARCHAR(256)
	, thumb_img_path VARCHAR(512)
	, url VARCHAR(500) DEFAULT '#'
	, created TIMESTAMP  DEFAULT CURRENT_TIMESTAMP  NOT NULL
	, modified TIMESTAMP 
);

ALTER TABLE GROUP_TBL
ADD FOREIGN KEY (org_id)
REFERENCES ORG_TBL(id)
ON DELETE CASCADE;

ALTER TABLE GROUP_TBL
ADD FOREIGN KEY (parent_id)
REFERENCES GROUP_TBL(id)
ON DELETE CASCADE;